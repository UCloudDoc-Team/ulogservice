# 分隔符提取模式采集日志

## 背景信息

ULogAgent 以换行符（\n）为日志结束的标识符，并根据指定的分隔符将采集到的每一行日志切分为不同的 Value。您需要为每个 Value 指定唯一的 Key，将所有日志进行统一结构化，便于后续查询分析、可视化展示。如果日志结构较为规范化、有明确分隔符，建议使用分隔符模式。

## 操作步骤

### 步骤1：创建/选择日志主题
参考主题、主题集管理

### 步骤2：采集配置

#### 配置日志文件采集路径
![文本路径](/images/text/text_path_1.png)
**文件路径**即日志所在的目录和文件名，ULogAgent 会按照采集路径中的目录部分匹配符合规则的目录，监听这些目录下符合规则的日志文件。最多设置 10 个不同的采集路径。
采集路径可以指定完整的目录和文件名，也可以通过通配符模糊匹配。

常见的采集路径的配置方式及示例如下。

| 配置方式       | 目录前缀表达式 | 文件名表达式 | 说明                                                         |
| -------------- | -------------- | ------------ | ------------------------------------------------------------ |
| 完整文件名称   | /var/log/nginx | access.log   | 此例中，日志路径配置为`/var/log/nginx/**/access.log`，LogListener 将会监听`/var/log/nginx`前缀路径下所有子目录中以`access.log`命名的日志文件 |
| 文件名后缀匹配 | /var/log/nginx | *.log        | 此例中，日志路径配置为`/var/log/nginx/**/*.log`，LogListener 将会监听`/var/log/nginx`前缀路径下所有子目录中以`.log`结尾的日志文件 |
| 文件名模糊匹配 | /var/log/nginx | error*       | 此例中，日志路径配置为`/var/log/nginx/**/error*`，LogListener 将会监听`/var/log/nginx`前缀路径下所有子目录中以`error`开头命名的日志文件 |

#### 配置采集策略
- 全量：ULogAgent 采集文件时，从文件的开头开始读。
- 增量：ULogAgent 采集文件时，只采集文件内新增的内容。

#### 配置编码模式
- UTF-8：若您的日志文件编码模式为 UTF-8，请选择该选项。
- GBK：若您的日志文件编码模式为 GBK，请选择该选项。

#### 配置分隔符模式

1. 将“提取模式”设置为分隔符。
2. 选择分隔符，并在“日志样例”文本框中，输入日志样例，单击提取。
   系统根据确定的分隔符将日志样例进行切分，并展示在抽取结果栏中，您需要为每个字段定义唯一的 key。目前，日志采集支持多种分隔符，常见的分隔符有：空格、制表符、竖线、分号、逗号。

![文本路径](/images/text/text_delimiter_1.png)

### 步骤3：索引配置
![文本路径](/images/text/text_index_1.png)